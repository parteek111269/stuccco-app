webpackJsonp([18],{736:function(l,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t,i,a,u,o,d,s,r,c,p,m,f,h,g,v,b,y=e(1),R=e(0),C=e(13),k=e(18),O=e(73),P=e(174),_=e(40),j=e(233),I=e(26),T=e(46),w=e(56),E=e(47),A=e(17),D=function(){function l(l,n,e,t,i,a,u,o,d,s,r,c,p,m,f,h){this.platform=l,this.checktoken=n,this.transfer=e,this.filePath=t,this.toastCtrl=i,this.loadingCtrl=a,this.camera=u,this.actionSheetCtrl=o,this.events=d,this.loading=s,this.AdviceProvider=r,this.file=c,this.imagePicker=p,this.navCtrl=m,this.navParams=f,this.formBuilder=h,this.baseurl=I.k,this.detailmissing=!1,this.showloader=!1,this.lastImage=null,this.user_id=JSON.parse(this.checktoken.userAuthData).id,console.log(this.user_id),this.post=h.group({title:["",k.u.compose([k.u.required])],description:["",k.u.compose([k.u.required])]}),this.type=this.navParams.data.type,"edit"==this.type&&(this.adviceId=this.navParams.data.id,this.post.controls.title.setValue(this.navParams.data.adviceDetail.title),this.des=this.navParams.data.adviceDetail.description)}return l.prototype.ionViewDidLoad=function(){console.log("ionViewDidLoad WritepostPage")},l.prototype.backbutton=function(){this.navCtrl.pop()},l.prototype.onSubmit=function(l){var n=this;console.log(this.post);var e=document.getElementById("contenteditable1").innerHTML;console.log(e),this.post.controls.description.setValue(e),""==this.post.controls.description.value||""==this.post.controls.title.value?this.detailmissing=!0:(this.detailmissing=!1,"edit"==this.type?this.AdviceProvider.editAdvice(this.adviceId,l).then(function(l){1==l.status&&n.navCtrl.setRoot(P.a)}):this.AdviceProvider.submitAdvice(l).then(function(l){1==l.status&&n.navCtrl.setRoot(P.a)}))},l.prototype.add_photo=function(){var l=this;this.actionSheetCtrl.create({buttons:[{text:"Choose From Gallery",handler:function(){console.log("Gallery clicked"),l.takePicture(l.camera.PictureSourceType.PHOTOLIBRARY)}},{text:"Take Picture",handler:function(){console.log("camera clicked"),l.takePicture(l.camera.PictureSourceType.CAMERA)}},{text:"Cancel",role:"cancel",handler:function(){console.log("Cancel clicked")}}]}).present()},l.prototype.createFileName=function(){return(new Date).getTime()+".jpg"},l.prototype.copyFileToLocalDir=function(l,n,e){var t=this;this.file.copyFile(l,n,cordova.file.dataDirectory,e).then(function(l){t.lastImage=e,t.uploadImage()},function(l){console.log(l)})},l.prototype.pathForImage=function(l){return null===l?"":cordova.file.dataDirectory+l},l.prototype.takePicture=function(l){var n=this;this.camera.getPicture({quality:100,sourceType:l,saveToPhotoAlbum:!1,correctOrientation:!0}).then(function(e){if(n.platform.is("android")&&l===n.camera.PictureSourceType.PHOTOLIBRARY)n.filePath.resolveNativePath(e).then(function(l){var t=l.substr(0,l.lastIndexOf("/")+1),i=e.substring(e.lastIndexOf("/")+1,e.lastIndexOf("?"));n.copyFileToLocalDir(t,i,n.createFileName())});else{var t=e.substr(e.lastIndexOf("/")+1),i=e.substr(0,e.lastIndexOf("/")+1);n.copyFileToLocalDir(i,t,n.createFileName())}},function(l){console.log(l)})},l.prototype.uploadImage=function(){var l=this,n=I.k+I.j+I.i+I._52;console.log(n);var e=this.pathForImage(this.lastImage),t=this.lastImage;this.checktoken.loadUserCredentials(),this.headers=new Headers,this.headers.append("Authorization","Bearer "+this.checktoken.authToken);var i={fileKey:"file",fileName:t,chunkedMode:!1,mimeType:"multipart/form-data",params:{file:t,user_id:this.user_id},headers:this.headers,httpMethod:"POST",trustAllHosts:!0},a=this.transfer.create();this.loading1=this.loadingCtrl.create({content:"Uploading..."}),this.loading1.present(),a.upload(e,n,i).then(function(n){if(console.log(n),200===n.responseCode){var e=JSON.parse(n.response);console.log(e),l.img=e.org_img_src;var t=document.createElement("a");t.className="advice_img",t.href="",t.dataset.src=l.baseurl+l.img,t.innerHTML+='<img data-id="'+e.img_id+'" src="'+l.baseurl+l.img+'" />',document.getElementById("contenteditable1").appendChild(t)}l.loading1.dismissAll()},function(n){console.log(n),l.loading1.dismissAll()})},l}();D=Object(R.__decorate)([Object(y.Component)({selector:"page-writepost",templateUrl:"writepost.html"}),Object(R.__metadata)("design:paramtypes",["function"==typeof(t=void 0!==C.s&&C.s)&&t||Object,"function"==typeof(i=void 0!==A.a&&A.a)&&i||Object,"function"==typeof(a=void 0!==w.a&&w.a)&&a||Object,"function"==typeof(u=void 0!==E.a&&E.a)&&u||Object,"function"==typeof(o=void 0!==C.v&&C.v)&&o||Object,"function"==typeof(d=void 0!==C.m&&C.m)&&d||Object,"function"==typeof(s=void 0!==T.a&&T.a)&&s||Object,"function"==typeof(r=void 0!==C.a&&C.a)&&r||Object,"function"==typeof(c=void 0!==C.f&&C.f)&&c||Object,"function"==typeof(p=void 0!==C.m&&C.m)&&p||Object,"function"==typeof(m=void 0!==j.a&&j.a)&&m||Object,"function"==typeof(f=void 0!==_.a&&_.a)&&f||Object,"function"==typeof(h=void 0!==O.a&&O.a)&&h||Object,"function"==typeof(g=void 0!==C.q&&C.q)&&g||Object,"function"==typeof(v=void 0!==C.r&&C.r)&&v||Object,"function"==typeof(b=void 0!==k.g&&k.g)&&b||Object])],D);var S=function(){return function(){}}();S=Object(R.__decorate)([Object(y.NgModule)({declarations:[D],imports:[C.l.forChild(D)]})],S);var q=e(392),x=e(393),F=e(394),L=e(395),N=e(396),M=e(397),V=e(398),B=e(399),H=e(400),U=e(37),J=e(3),G=e(44),W=e(6),Y=e(60),z=e(31),K=e(8),Z=e(23),Q=e(90),X=e(61),$=e(38),ll=e(69),nl=e(67),el=e(27),tl=e(5),il=e(9),al=e(29),ul=e(53),ol=e(10),dl=e(68),sl=e(20),rl=e(19),cl=e(45),pl=e(52),ml=e(55),fl=e(125),hl=e(83),gl=e(14),vl=e(30),bl=e(22),yl=e(74),Rl=e(49),Cl=e(65),kl=e(173),Ol=e(16),Pl=y["ɵcrt"]({encapsulation:2,styles:[],data:{}});function _l(l){return y["ɵvid"](0,[(l()(),y["ɵeld"](0,0,null,null,1,"p",[["class","errortxt errmsg"]],null,null,null,null,null)),(l()(),y["ɵted"](-1,null,["*Please fill both the fields"]))],null,null)}function jl(l){return y["ɵvid"](0,[(l()(),y["ɵeld"](0,0,null,null,1,"ion-icon",[["name","image"],["role","img"]],[[2,"hide",null]],null,null,null,null)),y["ɵdid"](1,147456,null,0,U.a,[J.a,y.ElementRef,y.Renderer],{name:[0,"name"]},null)],function(l,n){l(n,1,0,"image")},function(l,n){l(n,0,0,y["ɵnov"](n,1)._hidden)})}function Il(l){return y["ɵvid"](0,[(l()(),y["ɵeld"](0,0,null,null,19,"ion-header",[],null,null,null,null,null)),y["ɵdid"](1,16384,null,0,G.a,[J.a,y.ElementRef,y.Renderer,[2,W.a]],null,null),(l()(),y["ɵted"](-1,null,["\n    "])),(l()(),y["ɵeld"](3,0,null,null,5,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Y.b,Y.a)),y["ɵdid"](4,49152,null,0,z.a,[K.a,[2,W.a],[2,Z.a],J.a,y.ElementRef,y.Renderer],null,null),(l()(),y["ɵted"](-1,3,["\n        "])),(l()(),y["ɵeld"](6,0,null,3,1,"ion-title",[],null,null,null,Q.b,Q.a)),y["ɵdid"](7,49152,null,0,X.a,[J.a,y.ElementRef,y.Renderer,[2,$.a],[2,z.a]],null,null),(l()(),y["ɵted"](-1,3,["\n    "])),(l()(),y["ɵted"](-1,null,["\n    "])),(l()(),y["ɵeld"](10,0,null,null,8,"ion-toolbar",[["class","sub-header toolbar"]],[[2,"statusbar-padding",null]],null,null,ll.b,ll.a)),y["ɵdid"](11,49152,null,0,$.a,[J.a,y.ElementRef,y.Renderer],null,null),(l()(),y["ɵted"](-1,3,["\n        "])),(l()(),y["ɵeld"](13,0,null,3,4,"a",[["class","backicon"]],null,[[null,"click"]],function(l,n,e){var t=!0;"click"===n&&(t=!1!==l.component.backbutton()&&t);return t},null,null)),(l()(),y["ɵeld"](14,0,null,null,3,"ion-icon",[["ios","ios-arrow-back"],["name","arrow-back"],["role","img"]],[[2,"hide",null]],null,null,null,null)),y["ɵdid"](15,147456,null,0,U.a,[J.a,y.ElementRef,y.Renderer],{name:[0,"name"],ios:[1,"ios"]},null),(l()(),y["ɵeld"](16,0,null,null,1,"span",[["class","back-text"]],null,null,null,null,null)),(l()(),y["ɵted"](-1,null,["Back"])),(l()(),y["ɵted"](-1,3,["\n    "])),(l()(),y["ɵted"](-1,null,["\n"])),(l()(),y["ɵted"](-1,null,["\n"])),(l()(),y["ɵeld"](21,0,null,null,61,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,nl.b,nl.a)),y["ɵdid"](22,4374528,null,0,el.a,[J.a,tl.a,il.a,y.ElementRef,y.Renderer,K.a,al.a,y.NgZone,[2,W.a],[2,Z.a]],null,null),(l()(),y["ɵted"](-1,1,["\n    "])),(l()(),y["ɵeld"](24,0,null,1,57,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(l,n,e){var t=!0,i=l.component;"submit"===n&&(t=!1!==y["ɵnov"](l,26).onSubmit(e)&&t);"reset"===n&&(t=!1!==y["ɵnov"](l,26).onReset()&&t);"ngSubmit"===n&&(t=!1!==i.onSubmit(i.post)&&t);return t},null,null)),y["ɵdid"](25,16384,null,0,k.w,[],null,null),y["ɵdid"](26,540672,null,0,k.j,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),y["ɵprd"](2048,null,k.c,null,[k.j]),y["ɵdid"](28,16384,null,0,k.q,[k.c],null,null),(l()(),y["ɵted"](-1,null,["\n        "])),(l()(),y["ɵeld"](30,0,null,null,33,"ion-list",[["class","form-requirment"]],null,null,null,null,null)),y["ɵdid"](31,16384,null,0,ul.a,[J.a,y.ElementRef,y.Renderer,tl.a,ol.l,il.a],null,null),(l()(),y["ɵted"](-1,null,["\n            "])),(l()(),y["ɵeld"](33,0,null,null,16,"ion-item",[["class","item item-block"]],null,null,null,dl.b,dl.a)),y["ɵdid"](34,1097728,null,3,sl.a,[rl.a,J.a,y.ElementRef,y.Renderer,[2,cl.a]],null,null),y["ɵqud"](335544320,1,{contentLabel:0}),y["ɵqud"](603979776,2,{_buttons:1}),y["ɵqud"](603979776,3,{_icons:1}),y["ɵdid"](38,16384,null,0,pl.a,[],null,null),(l()(),y["ɵted"](-1,2,["\n                "])),(l()(),y["ɵeld"](40,0,null,1,2,"ion-label",[["stacked",""]],null,null,null,null,null)),y["ɵdid"](41,16384,[[1,4]],0,ml.a,[J.a,y.ElementRef,y.Renderer,[8,null],[8,""],[8,null],[8,null]],null,null),(l()(),y["ɵted"](-1,null,["Title"])),(l()(),y["ɵted"](-1,2,["\n                "])),(l()(),y["ɵeld"](44,0,null,3,4,"ion-input",[["formControlName","title"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,fl.b,fl.a)),y["ɵdid"](45,671744,null,0,k.i,[[3,k.c],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),y["ɵprd"](2048,null,k.o,null,[k.i]),y["ɵdid"](47,16384,null,0,k.p,[k.o],null,null),y["ɵdid"](48,5423104,null,0,hl.a,[J.a,tl.a,rl.a,K.a,y.ElementRef,y.Renderer,[2,el.a],[2,sl.a],[2,k.o],il.a],{type:[0,"type"]},null),(l()(),y["ɵted"](-1,2,["\n            "])),(l()(),y["ɵted"](-1,null,["\n            "])),(l()(),y["ɵeld"](51,0,null,null,11,"ion-item",[["class","item item-block"]],null,null,null,dl.b,dl.a)),y["ɵdid"](52,1097728,null,3,sl.a,[rl.a,J.a,y.ElementRef,y.Renderer,[2,cl.a]],null,null),y["ɵqud"](335544320,4,{contentLabel:0}),y["ɵqud"](603979776,5,{_buttons:1}),y["ɵqud"](603979776,6,{_icons:1}),y["ɵdid"](56,16384,null,0,pl.a,[],null,null),(l()(),y["ɵted"](-1,2,["\n                "])),(l()(),y["ɵeld"](58,0,null,2,1,"div",[["class","cust_label"]],null,null,null,null,null)),(l()(),y["ɵted"](-1,null,["Description"])),(l()(),y["ɵted"](-1,2,["\n                "])),(l()(),y["ɵeld"](61,0,null,2,0,"div",[["class","question-description mar-tb-10"],["contenteditable","true"],["id","contenteditable1"]],[[8,"innerHTML",1]],null,null,null,null)),(l()(),y["ɵted"](-1,2,["\n            "])),(l()(),y["ɵted"](-1,null,["\n        "])),(l()(),y["ɵted"](-1,null,["\n        "])),(l()(),y["ɵand"](16777216,null,null,1,null,_l)),y["ɵdid"](66,16384,null,0,gl.i,[y.ViewContainerRef,y.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),y["ɵted"](-1,null,["\n        "])),(l()(),y["ɵeld"](68,0,null,null,12,"div",[["class","buttons_outer"]],null,null,null,null,null)),(l()(),y["ɵted"](-1,null,["\n            "])),(l()(),y["ɵeld"](70,0,null,null,5,"div",[["class","add_photo"]],null,[[null,"click"]],function(l,n,e){var t=!0;"click"===n&&(t=!1!==l.component.add_photo()&&t);return t},null,null)),(l()(),y["ɵted"](-1,null,["\n                "])),(l()(),y["ɵand"](16777216,null,null,1,null,jl)),y["ɵdid"](73,16384,null,0,gl.i,[y.ViewContainerRef,y.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),y["ɵted"](-1,null,["\n                "])),(l()(),y["ɵted"](-1,null,["\n                Add photo\n            "])),(l()(),y["ɵted"](-1,null,["\n            "])),(l()(),y["ɵeld"](77,0,null,null,2,"button",[["class","pull-right"],["ion-button",""],["round",""],["type","submit"]],null,null,null,vl.b,vl.a)),y["ɵdid"](78,1097728,null,0,bl.a,[[8,""],J.a,y.ElementRef,y.Renderer],{round:[0,"round"]},null),(l()(),y["ɵted"](-1,0,["Post"])),(l()(),y["ɵted"](-1,null,["\n        "])),(l()(),y["ɵted"](-1,null,["\n    "])),(l()(),y["ɵted"](-1,1,["\n"])),(l()(),y["ɵted"](-1,null,["\n"]))],function(l,n){var e=n.component;l(n,15,0,"arrow-back","ios-arrow-back"),l(n,26,0,e.post);l(n,45,0,"title");l(n,48,0,"text"),l(n,66,0,e.detailmissing),l(n,73,0,!e.showloader);l(n,78,0,"")},function(l,n){var e=n.component;l(n,3,0,y["ɵnov"](n,4)._hidden,y["ɵnov"](n,4)._sbPadding),l(n,10,0,y["ɵnov"](n,11)._sbPadding),l(n,14,0,y["ɵnov"](n,15)._hidden),l(n,21,0,y["ɵnov"](n,22).statusbarPadding,y["ɵnov"](n,22)._hasRefresher),l(n,24,0,y["ɵnov"](n,28).ngClassUntouched,y["ɵnov"](n,28).ngClassTouched,y["ɵnov"](n,28).ngClassPristine,y["ɵnov"](n,28).ngClassDirty,y["ɵnov"](n,28).ngClassValid,y["ɵnov"](n,28).ngClassInvalid,y["ɵnov"](n,28).ngClassPending),l(n,44,0,y["ɵnov"](n,47).ngClassUntouched,y["ɵnov"](n,47).ngClassTouched,y["ɵnov"](n,47).ngClassPristine,y["ɵnov"](n,47).ngClassDirty,y["ɵnov"](n,47).ngClassValid,y["ɵnov"](n,47).ngClassInvalid,y["ɵnov"](n,47).ngClassPending),l(n,61,0,e.des)})}var Tl=y["ɵccf"]("page-writepost",D,function(l){return y["ɵvid"](0,[(l()(),y["ɵeld"](0,0,null,null,1,"page-writepost",[],null,null,null,Il,Pl)),y["ɵdid"](1,49152,null,0,D,[tl.a,A.a,w.a,E.a,yl.a,Rl.a,T.a,Cl.a,kl.a,Rl.a,j.a,_.a,O.a,Z.a,Ol.a,k.g],null,null)],null,null)},{},{},[]),wl=e(224),El=e(89);e.d(n,"WritepostPageModuleNgFactory",function(){return Al});var Al=y["ɵcmf"](S,[],function(l){return y["ɵmod"]([y["ɵmpd"](512,y.ComponentFactoryResolver,y["ɵCodegenComponentFactoryResolver"],[[8,[q.a,x.a,F.a,L.a,N.a,M.a,V.a,B.a,H.a,Tl]],[3,y.ComponentFactoryResolver],y.NgModuleRef]),y["ɵmpd"](4608,gl.k,gl.j,[y.LOCALE_ID]),y["ɵmpd"](4608,k.x,k.x,[]),y["ɵmpd"](4608,k.g,k.g,[]),y["ɵmpd"](512,gl.b,gl.b,[]),y["ɵmpd"](512,k.v,k.v,[]),y["ɵmpd"](512,k.l,k.l,[]),y["ɵmpd"](512,k.s,k.s,[]),y["ɵmpd"](512,wl.a,wl.a,[]),y["ɵmpd"](512,wl.b,wl.b,[]),y["ɵmpd"](512,S,S,[]),y["ɵmpd"](256,El.a,D,[])])})}});