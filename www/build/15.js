webpackJsonp([15],{711:function(l,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t,u,i,a,o,r,s,d=e(1),c=e(0),f=e(13),g=e(94),p=e(17),m=e(26),h=e(130),v=function(){function l(l,n,e,t,u,i,a){this.alertCtrl=l,this.navCtrl=n,this.navParams=e,this.messageService=t,this.checktoken=u,this.loading=i,this.badge=a,this.messagelistDetail=[],this.page=1,console.log(e.data),this.badge.decrease(e.data),this.baseUrl=m.k}return l.prototype.goToUserProfile=function(l){this.navCtrl.push("ProfilePage",l,{animate:!0,animation:"transition",duration:500,direction:"forward"})},l.prototype.conversationMessage=function(l){var n=this;this.messageService.conversationMessageService(l,this.page).then(function(l){n.navCtrl.push("ChattingPage",{conversation_id:l.messages[0].conversation_id})})},l.prototype.getMessageList=function(){var l=this;this.messagelistDetail=[];var n=this.loading.create({content:"Loading..."});return n.present().then(function(){l.messageService.getMessageListService().then(function(e){for(var t in e)l.messagelistDetail.push(e[t]);n.dismiss()})})},l.prototype.refreshMessageList=function(){var l=this;this.messageService.getMessageListService().then(function(n){for(var e in l.messagelistDetail=[],n)l.messagelistDetail.push(n[e])})},l.prototype.confirmDeleteConv=function(l,n){var e=this;this.alertCtrl.create({title:"Delete Conversation",message:"Do you want to delete this message?",buttons:[{text:"Cancel",role:"cancel",handler:function(){return console.log("Cancel clicked"),!0}},{text:"Confirm",handler:function(){e.deleteMyMessages(l,n)}}]}).present()},l.prototype.doRefresh=function(l){this.refreshMessageList(),setTimeout(function(){l.complete()},1e3)},l.prototype.deleteMyMessages=function(l,n){var e=this;this.messageService.deleteConversation(l).then(function(l){if(!l.status)return!1;e.messagelistDetail.splice(n,1)})},l.prototype.clearMessages=function(){var l=this;this.messageService.clearMessages().then(function(n){console.log(n),l.messageService.updateMessages(n)})},l.prototype.ionViewDidLoad=function(){console.log("ionViewDidLoad MessagePage"),this.getMessageList(),this.clearMessages()},l}();v=Object(c.__decorate)([Object(d.Component)({selector:"page-message",templateUrl:"message.html"}),Object(c.__metadata)("design:paramtypes",["function"==typeof(t=void 0!==f.b&&f.b)&&t||Object,"function"==typeof(u=void 0!==f.q&&f.q)&&u||Object,"function"==typeof(i=void 0!==f.r&&f.r)&&i||Object,"function"==typeof(a=void 0!==g.a&&g.a)&&a||Object,"function"==typeof(o=void 0!==p.a&&p.a)&&o||Object,"function"==typeof(r=void 0!==f.m&&f.m)&&r||Object,"function"==typeof(s=void 0!==h.a&&h.a)&&s||Object])],v);var b=function(){return function(){}}();b=Object(c.__decorate)([Object(d.NgModule)({declarations:[v],imports:[f.l.forChild(v)],exports:[v]})],b);var R=e(392),y=e(393),x=e(394),M=e(395),_=e(396),C=e(397),T=e(398),D=e(399),O=e(400),I=e(235),S=e(53),j=e(5),k=d["ɵcrt"]({encapsulation:2,styles:[],data:{}});function E(l){return d["ɵvid"](2,[(l()(),d["ɵted"](-1,null,["\n    "])),d["ɵncd"](null,0),(l()(),d["ɵted"](-1,null,["\n    "])),d["ɵncd"](null,1),(l()(),d["ɵted"](-1,null,["\n  "]))],null,null)}d["ɵccf"]("ion-item-sliding",I.a,function(l){return d["ɵvid"](0,[(l()(),d["ɵeld"](0,0,null,null,3,"ion-item-sliding",[],null,null,null,E,k)),d["ɵdid"](1,49152,null,2,I.a,[[2,S.a],j.a,d.Renderer,d.ElementRef,d.NgZone],null,null),d["ɵqud"](335544320,1,{item:0}),d["ɵqud"](603979776,2,{_itemOptions:1})],null,null)},{},{ionDrag:"ionDrag"},["ion-item,[ion-item]","ion-item-options"]);var L=e(68),w=e(20),P=e(19),q=e(3),N=e(45),$=e(52),F=e(172),V=e(179),U=e(30),Z=e(22),H=e(37),A=e(44),J=e(6),z=e(60),B=e(31),G=e(8),K=e(23),Q=e(90),W=e(61),X=e(38),Y=e(67),ll=e(27),nl=e(9),el=e(29),tl=e(171),ul=e(10),il=e(738),al=e(229),ol=e(14),rl=e(82),sl=e(16),dl=e(49),cl=d["ɵcrt"]({encapsulation:2,styles:[],data:{}});function fl(l){return d["ɵvid"](0,[(l()(),d["ɵeld"](0,0,null,null,42,"ion-item-sliding",[],null,null,null,E,k)),d["ɵdid"](1,49152,null,2,I.a,[[2,S.a],j.a,d.Renderer,d.ElementRef,d.NgZone],null,null),d["ɵqud"](335544320,1,{item:0}),d["ɵqud"](603979776,2,{_itemOptions:1}),(l()(),d["ɵted"](-1,null,["\n            "])),(l()(),d["ɵeld"](5,0,null,0,25,"ion-item",[["class","item item-block"]],null,null,null,L.b,L.a)),d["ɵdid"](6,1097728,[[1,4]],3,w.a,[P.a,q.a,d.ElementRef,d.Renderer,[2,N.a]],null,null),d["ɵqud"](335544320,3,{contentLabel:0}),d["ɵqud"](603979776,4,{_buttons:1}),d["ɵqud"](603979776,5,{_icons:1}),d["ɵdid"](10,16384,null,0,$.a,[],null,null),(l()(),d["ɵted"](-1,2,["\n                "])),(l()(),d["ɵeld"](12,0,null,0,4,"ion-avatar",[["item-start",""]],null,null,null,null,null)),d["ɵdid"](13,16384,null,0,F.a,[],null,null),(l()(),d["ɵted"](-1,null,["\n                    "])),(l()(),d["ɵeld"](15,0,null,null,0,"img",[],[[8,"src",4]],[[null,"click"]],function(l,n,e){var t=!0;"click"===n&&(t=!1!==l.component.goToUserProfile(l.context.$implicit)&&t);return t},null,null)),(l()(),d["ɵted"](-1,null,["\n                "])),(l()(),d["ɵted"](-1,2,["\n                "])),(l()(),d["ɵeld"](18,0,null,2,11,"div",[],null,[[null,"click"]],function(l,n,e){var t=!0;"click"===n&&(t=!1!==l.component.conversationMessage(l.context.$implicit.conversation_id)&&t);return t},null,null)),(l()(),d["ɵted"](-1,null,["\n                    "])),(l()(),d["ɵeld"](20,0,null,null,1,"h2",[["class","messanger-name"]],null,null,null,null,null)),(l()(),d["ɵted"](21,null,["",""])),(l()(),d["ɵted"](-1,null,["\n                    "])),(l()(),d["ɵeld"](23,0,null,null,2,"h3",[["class","message-link"]],null,null,null,null,null)),(l()(),d["ɵeld"](24,0,null,null,1,"a",[],null,null,null,null,null)),(l()(),d["ɵted"](25,null,["",""])),(l()(),d["ɵted"](-1,null,["\n                    "])),(l()(),d["ɵeld"](27,0,null,null,1,"p",[["class","message-time"]],null,null,null,null,null)),(l()(),d["ɵted"](28,null,["",""])),(l()(),d["ɵted"](-1,null,["\n                "])),(l()(),d["ɵted"](-1,2,["\n            "])),(l()(),d["ɵted"](-1,null,["\n            "])),(l()(),d["ɵeld"](32,0,null,1,9,"ion-item-options",[["side","right"]],null,null,null,null,null)),d["ɵdid"](33,16384,[[2,4]],0,V.a,[d.ElementRef,j.a],{side:[0,"side"]},null),(l()(),d["ɵted"](-1,null,["\n                "])),(l()(),d["ɵeld"](35,0,null,null,5,"button",[["color","danger"],["ion-button",""]],null,[[null,"click"]],function(l,n,e){var t=!0;"click"===n&&(t=!1!==l.component.confirmDeleteConv(l.context.$implicit.conversation_id,l.context.index)&&t);return t},U.b,U.a)),d["ɵdid"](36,1097728,null,0,Z.a,[[8,""],q.a,d.ElementRef,d.Renderer],{color:[0,"color"]},null),(l()(),d["ɵted"](-1,0,["\n                    "])),(l()(),d["ɵeld"](38,0,null,0,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),d["ɵdid"](39,147456,null,0,H.a,[q.a,d.ElementRef,d.Renderer],{name:[0,"name"]},null),(l()(),d["ɵted"](-1,0,["\n                    Delete\n                "])),(l()(),d["ɵted"](-1,null,["\n            "])),(l()(),d["ɵted"](-1,null,["\n            \n        "]))],function(l,n){l(n,33,0,"right");l(n,36,0,"danger");l(n,39,0,"trash")},function(l,n){l(n,15,0,d["ɵinlineInterpolate"](2,"",n.component.baseUrl,"",n.context.$implicit.avatar,"")),l(n,21,0,n.context.$implicit.name),l(n,25,0,n.context.$implicit.message),l(n,28,0,n.context.$implicit.created_at),l(n,38,0,d["ɵnov"](n,39)._hidden)})}function gl(l){return d["ɵvid"](0,[(l()(),d["ɵeld"](0,0,null,null,10,"ion-header",[],null,null,null,null,null)),d["ɵdid"](1,16384,null,0,A.a,[q.a,d.ElementRef,d.Renderer,[2,J.a]],null,null),(l()(),d["ɵted"](-1,null,["\n    "])),(l()(),d["ɵeld"](3,0,null,null,6,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,z.b,z.a)),d["ɵdid"](4,49152,null,0,B.a,[G.a,[2,J.a],[2,K.a],q.a,d.ElementRef,d.Renderer],null,null),(l()(),d["ɵted"](-1,3,["\n        "])),(l()(),d["ɵeld"](6,0,null,3,2,"ion-title",[],null,null,null,Q.b,Q.a)),d["ɵdid"](7,49152,null,0,W.a,[q.a,d.ElementRef,d.Renderer,[2,X.a],[2,B.a]],null,null),(l()(),d["ɵted"](-1,0,["message"])),(l()(),d["ɵted"](-1,3,["\n    "])),(l()(),d["ɵted"](-1,null,["\n"])),(l()(),d["ɵted"](-1,null,["\n"])),(l()(),d["ɵeld"](12,0,null,null,20,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Y.b,Y.a)),d["ɵdid"](13,4374528,null,0,ll.a,[q.a,j.a,nl.a,d.ElementRef,d.Renderer,G.a,el.a,d.NgZone,[2,J.a],[2,K.a]],null,null),(l()(),d["ɵted"](-1,1,["\n    "])),(l()(),d["ɵeld"](15,0,null,1,1,"h2",[["class","Message-title"]],null,null,null,null,null)),(l()(),d["ɵted"](-1,null,["Messages"])),(l()(),d["ɵted"](-1,1,["\n    "])),(l()(),d["ɵeld"](18,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(l,n,e){var t=!0;"ionRefresh"===n&&(t=!1!==l.component.doRefresh(e)&&t);return t},null,null)),d["ɵdid"](19,212992,null,0,tl.a,[j.a,ll.a,d.NgZone,ul.l],null,{ionRefresh:"ionRefresh"}),(l()(),d["ɵted"](-1,null,["\n        "])),(l()(),d["ɵeld"](21,0,null,null,2,"ion-refresher-content",[["pullingIcon","arrow-dropdown"],["pullingText","Pull to refresh"],["refreshingSpinner","ios"]],[[1,"state",0]],null,null,il.b,il.a)),d["ɵdid"](22,114688,null,0,al.a,[tl.a,q.a],{pullingIcon:[0,"pullingIcon"],pullingText:[1,"pullingText"],refreshingSpinner:[2,"refreshingSpinner"]},null),(l()(),d["ɵted"](-1,null,["      \n       "])),(l()(),d["ɵted"](-1,null,["\n    "])),(l()(),d["ɵted"](-1,1,["\n    "])),(l()(),d["ɵeld"](26,0,null,1,5,"ion-list",[["inset",""]],null,null,null,null,null)),d["ɵdid"](27,16384,null,0,S.a,[q.a,d.ElementRef,d.Renderer,j.a,ul.l,nl.a],null,null),(l()(),d["ɵted"](-1,null,["\n        "])),(l()(),d["ɵand"](16777216,null,null,1,null,fl)),d["ɵdid"](30,802816,null,0,ol.h,[d.ViewContainerRef,d.TemplateRef,d.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),d["ɵted"](-1,null,["\n    "])),(l()(),d["ɵted"](-1,1,["\n\n"])),(l()(),d["ɵted"](-1,null,[" \n"]))],function(l,n){var e=n.component;l(n,19,0);l(n,22,0,"arrow-dropdown","Pull to refresh","ios"),l(n,30,0,e.messagelistDetail)},function(l,n){l(n,3,0,d["ɵnov"](n,4)._hidden,d["ɵnov"](n,4)._sbPadding),l(n,12,0,d["ɵnov"](n,13).statusbarPadding,d["ɵnov"](n,13)._hasRefresher),l(n,18,0,"inactive"!==d["ɵnov"](n,19).state,d["ɵnov"](n,19)._top),l(n,21,0,d["ɵnov"](n,22).r.state)})}var pl=d["ɵccf"]("page-message",v,function(l){return d["ɵvid"](0,[(l()(),d["ɵeld"](0,0,null,null,1,"page-message",[],null,null,null,gl,cl)),d["ɵdid"](1,49152,null,0,v,[rl.a,K.a,sl.a,g.a,p.a,dl.a,h.a],null,null)],null,null)},{},{},[]),ml=e(18),hl=e(224),vl=e(89);e.d(n,"MessagePageModuleNgFactory",function(){return bl});var bl=d["ɵcmf"](b,[],function(l){return d["ɵmod"]([d["ɵmpd"](512,d.ComponentFactoryResolver,d["ɵCodegenComponentFactoryResolver"],[[8,[R.a,y.a,x.a,M.a,_.a,C.a,T.a,D.a,O.a,pl]],[3,d.ComponentFactoryResolver],d.NgModuleRef]),d["ɵmpd"](4608,ol.k,ol.j,[d.LOCALE_ID]),d["ɵmpd"](4608,ml.x,ml.x,[]),d["ɵmpd"](4608,ml.g,ml.g,[]),d["ɵmpd"](512,ol.b,ol.b,[]),d["ɵmpd"](512,ml.v,ml.v,[]),d["ɵmpd"](512,ml.l,ml.l,[]),d["ɵmpd"](512,ml.s,ml.s,[]),d["ɵmpd"](512,hl.a,hl.a,[]),d["ɵmpd"](512,hl.b,hl.b,[]),d["ɵmpd"](512,b,b,[]),d["ɵmpd"](256,vl.a,v,[])])})},738:function(l,n,e){"use strict";e.d(n,"a",function(){return c}),n.b=m;var t=e(1),u=e(37),i=e(3),a=e(14),o=e(102),r=e(70),s=e(229),d=e(171),c=t["ɵcrt"]({encapsulation:2,styles:[],data:{}});function f(l){return t["ɵvid"](0,[(l()(),t["ɵeld"](0,0,null,null,2,"div",[["class","refresher-pulling-icon"]],null,null,null,null,null)),(l()(),t["ɵeld"](1,0,null,null,1,"ion-icon",[["role","img"]],[[2,"hide",null]],null,null,null,null)),t["ɵdid"](2,147456,null,0,u.a,[i.a,t.ElementRef,t.Renderer],{name:[0,"name"]},null)],function(l,n){l(n,2,0,n.component.pullingIcon)},function(l,n){l(n,1,0,t["ɵnov"](n,2)._hidden)})}function g(l){return t["ɵvid"](0,[(l()(),t["ɵeld"](0,0,null,null,0,"div",[["class","refresher-pulling-text"]],[[8,"innerHTML",1]],null,null,null,null))],null,function(l,n){l(n,0,0,n.component.pullingText)})}function p(l){return t["ɵvid"](0,[(l()(),t["ɵeld"](0,0,null,null,0,"div",[["class","refresher-refreshing-text"]],[[8,"innerHTML",1]],null,null,null,null))],null,function(l,n){l(n,0,0,n.component.refreshingText)})}function m(l){return t["ɵvid"](0,[(l()(),t["ɵeld"](0,0,null,null,4,"div",[["class","refresher-pulling"]],null,null,null,null,null)),(l()(),t["ɵand"](16777216,null,null,1,null,f)),t["ɵdid"](2,16384,null,0,a.i,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["ɵand"](16777216,null,null,1,null,g)),t["ɵdid"](4,16384,null,0,a.i,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["ɵeld"](5,0,null,null,5,"div",[["class","refresher-refreshing"]],null,null,null,null,null)),(l()(),t["ɵeld"](6,0,null,null,2,"div",[["class","refresher-refreshing-icon"]],null,null,null,null,null)),(l()(),t["ɵeld"](7,0,null,null,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,o.b,o.a)),t["ɵdid"](8,114688,null,0,r.a,[i.a,t.ElementRef,t.Renderer],{name:[0,"name"]},null),(l()(),t["ɵand"](16777216,null,null,1,null,p)),t["ɵdid"](10,16384,null,0,a.i,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(l,n){var e=n.component;l(n,2,0,e.pullingIcon),l(n,4,0,e.pullingText),l(n,8,0,e.refreshingSpinner),l(n,10,0,e.refreshingText)},function(l,n){l(n,7,0,t["ɵnov"](n,8)._paused)})}t["ɵccf"]("ion-refresher-content",s.a,function(l){return t["ɵvid"](0,[(l()(),t["ɵeld"](0,0,null,null,1,"ion-refresher-content",[],[[1,"state",0]],null,null,m,c)),t["ɵdid"](1,114688,null,0,s.a,[d.a,i.a],null,null)],function(l,n){l(n,1,0)},function(l,n){l(n,0,0,t["ɵnov"](n,1).r.state)})},{pullingIcon:"pullingIcon",pullingText:"pullingText",refreshingSpinner:"refreshingSpinner",refreshingText:"refreshingText"},{},[])}});